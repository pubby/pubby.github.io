<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Copyright (c) 2023, Pubby">
<title>MapFab</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>MapFab</h1>
<div class="details">
<span id="author" class="author">Copyright (c) 2023, Pubby</span><br>
<span id="revdate">Version 0.1</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about_this_document">1. About this Document</a></li>
<li><a href="#_what_is_mapfab">2. What is MapFab?</a></li>
<li><a href="#_getting_started">3. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_installation">3.1. Installation</a></li>
<li><a href="#_resources">3.2. Resources</a></li>
</ul>
</li>
<li><a href="#_interface">4. Interface</a>
<ul class="sectlevel2">
<li><a href="#_tools">4.1. Tools</a></li>
<li><a href="#tab_manager">4.2. Tab Manager</a></li>
<li><a href="#_chr_tab">4.3. CHR Tab</a></li>
<li><a href="#_palettes_tab">4.4. Palettes Tab</a></li>
<li><a href="#_metatiles_tab">4.5. Metatiles Tab</a></li>
<li><a href="#level">4.6. Levels Tab</a></li>
<li><a href="#object_class">4.7. Object Classes Tab</a></li>
</ul>
</li>
<li><a href="#_mapfab_file_format">5. <code>.mapfab</code> File Format</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_about_this_document">1. About this Document</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This documentation is for <a href="http://pubby.games/mapfab.html">MapFab</a>.
It is currently a work in progress, so comments and contributions are welcome.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Question can be asked on the <a href="https://discord.gg/RUrYmC5ZeE">Discord</a> or via <a href="https://pubby.games/email.png">email</a>.</p>
</li>
<li>
<p>Changes can be submitted it via the <a href="https://github.com/pubby/mapfab">Github</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_mapfab">2. What is MapFab?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MapFab is a metatile-based level editor designed for making NES games.
Although it is intended to be used with the <a href="http://pubby.games/nesfab.html">NESFab programming language</a>,
it can be used with other environments too.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">3. Getting Started</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installation">3.1. Installation</h3>
<div class="paragraph">
<p>MapFab is available on <a href="https://github.com/pubby/mapfab">Github</a>.
It is best to build it from scratch, but if that is not possible, download one of the <a href="https://github.com/pubby/mapfab/releases">releases</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resources">3.2. Resources</h3>
<div class="paragraph">
<p>It&#8217;s a good idea to understand how NES graphics work before using MapFab.
A good article on the subject is <a href="https://www.dustmop.io/blog/2015/04/28/nes-graphics-part-1/">NES Graphics - Part 1 by Dustmop</a> (Continued in <a href="https://www.dustmop.io/blog/2015/06/08/nes-graphics-part-2/">Part 2</a> and <a href="https://www.dustmop.io/blog/2015/12/18/nes-graphics-part-3/">Part 3</a>).</p>
</div>
<div class="paragraph">
<p>Additionally, the <a href="https://www.nesdev.org/wiki/Nesdev_Wiki">NESDev wiki</a> has documentation which may come in handy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.nesdev.org/wiki/PPU_pattern_tables">PPU Pattern Tables</a></p>
</li>
<li>
<p><a href="https://www.nesdev.org/wiki/PPU_palettes">PPU Palettes</a></p>
</li>
<li>
<p><a href="https://www.nesdev.org/wiki/PPU_nametables">PPU Nametables</a></p>
</li>
<li>
<p><a href="https://www.nesdev.org/wiki/PPU_attribute_tables">PPU Attribute Tables</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interface">4. Interface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tools">4.1. Tools</h3>
<div class="paragraph">
<p>MapFab has three tools available, selectable on the left side of the screen.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/tools.png" alt="tools">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Stamp:</strong> Used to place new tiles and objects.</p>
</li>
<li>
<p><strong>Dropper:</strong> Used to pick existing tiles and objects so that copies can be placed.</p>
</li>
<li>
<p><strong>Selector:</strong> Used to select tiles and objects for editing them. Right click to remove selections, and hold shift while left clicking to add onto existing selections.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="tab_manager">4.2. Tab Manager</h3>
<div class="paragraph">
<p>Several tabs in MapFab have children tabs.
These children are managed using the "Tab Manager", accessible via the "View" menu.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/tab_manager.png" alt="tab manager">
</div>
</div>
<div class="paragraph">
<p>Children tabs will be visible when the checkbox neck to their name is checked.
The "Deselect All" and "Select by Name" buttons can be used to deselect or select multiple children tabs at once.</p>
</div>
<div class="paragraph">
<p>Tabs can be created, deleted, renamed, or cloned by right clicking an existing tab entry.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/tab_manager_right.png" alt="tab manager right">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When using NESFab, it&#8217;s recommended to name tabs using <code>snake_case</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Likewise, tabs can be reordered by clicking the "Up" or "Down" buttons.</p>
</div>
</div>
<div class="sect2">
<h3 id="_chr_tab">4.3. CHR Tab</h3>
<div class="paragraph">
<p>The CHR tab is used to import tilesets.</p>
</div>
<div class="paragraph">
<p><strong>Collision Tileset</strong></p>
</div>
<div class="paragraph">
<p>Each metatile in MapFab has a user-defined 6-bit collision value, representing how the metatile should behave in-game.
For example, you might define solid walls to be the number 1, hazards as number 2, and open space as the number 0.
To display these collision values in MapFab, a collision tileset is used, which is a 256x256 <code>.png</code> file with transparency.
This file will be used for UI purposes only; it will not be displayed in games.</p>
</div>
<div class="paragraph">
<p>Below is an example collision file. Although up to 64 collision values can be defined, this file only has graphics for the first 3.
A few of the other tiles are labeled with their value.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/collision.png" alt="collision">
</div>
</div>
<div class="paragraph">
<p><strong>CHR Tilesets</strong></p>
</div>
<div class="paragraph">
<p>CHR tilesets form the game&#8217;s graphics, and MapFab lets you define any number of them.
Each CHR file should be a 128x128 image, imported from either a <code>.png</code> or <code>.chr</code>.
These CHR files are associated with a name in MapFab which other tabs will reference.</p>
</div>
<div class="paragraph">
<p>Below is an example CHR file. It is a non-indexed <code>.png</code> file that uses four shades of gray. Alternatively, a <code>.chr</code> file or indexed PNG may be used.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/chr.png" alt="chr">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_palettes_tab">4.4. Palettes Tab</h3>
<div class="paragraph">
<p>A NES palette is a set of 25 colors, and MapFab lets you define any number of these sets.</p>
</div>
<div class="paragraph">
<p>On the left side of the palettes tab, a list of all possible NES colors is shown, serving as a picker.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/color_picker.png" alt="color picker">
</div>
</div>
<div class="paragraph">
<p>The right side of the palettes tab displays the defined palettes, where each row represents one palette. Rows can be added by raising the "Palette Count" number. To place colors, select them from the picker and then use the stamp tool.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/palette.png" alt="palette">
</div>
</div>
<div class="paragraph">
<p>As one might expect, columns labeled "BG" represent background colors, while columns labeled "SPR" represent sprite colors. The column "UBC" represents the background color shared amongst all background tiles. Note that in MapFab, sprite colors will never be displayed elsewhere, but they can still be set for use in games.</p>
</div>
</div>
<div class="sect2">
<h3 id="_metatiles_tab">4.5. Metatiles Tab</h3>
<div class="paragraph">
<p>Although the NES uses 8x8 CHR tiles internally, levels in MapFab are defined using 16x16 tiles called "metatiles".
Each metatile is the combination of four 8x8 CHR tiles, along with a 2-bit palette attribute and a 6-bit collision value.
The metatiles tab is used to define these.</p>
</div>
<div class="paragraph">
<p>Before editing metatiles, a "Display CHR" and "Display Palette" must be chosen.
As the name states, these settings are intended for display purposes only.
In MapFab, the CHR and palette are saved per-level, not per-metatile set.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/metatiles_ui.png" alt="metatiles ui">
</div>
</div>
<div class="paragraph">
<p>Once the "Display CHR" has been set, the left side of the metatiles tab will display the CHR tileset, serving as a picker.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/chr_tile_picker.png" alt="chr tile picker">
</div>
</div>
<div class="paragraph">
<p>The right side of the metatiles tab displays the defined metatiles, with each 16x16 pixel region representing a metatile.
The number of metatiles can be changed using the "Metatile Count" control.
To place CHR tiles, select them from the picker and then use the stamp tool.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/metatiles.png" alt="metatiles">
</div>
</div>
<div class="paragraph">
<p>Attributes of tiles to be placed can be changed using the radio buttons. Collision values can be edited using the same interface.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/attribute_ui.png" alt="attribute ui">
</div>
</div>
<div class="paragraph">
<p>To add or delete metatile sets, use the <a href="#tab_manager">Tab Manager</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="level">4.6. Levels Tab</h3>
<div class="paragraph">
<p>Levels in MapFab are a grid of metatiles, along with any number of objects.
Additionally, they are defined to use a specific CHR tileset, and a specific palette index.</p>
</div>
<div class="paragraph">
<p>Before editing a level, the "Metatiles", "CHR", and "Palette" must be chosen.
By selecting the "Metatiles" first, the other fields will be automatically assigned.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/level_ui.png" alt="level ui">
</div>
</div>
<div class="paragraph">
<p>Above these controls, a "Macro" input is editable.
When using NESFab, this value determines which macro handles the level.
Otherwise, the value can be used for holding whatever metadata you like.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/macro.png" alt="macro">
</div>
</div>
<div class="paragraph">
<p>Once "Metatiles" has been set, the left side of the levels tab will display the available metatiles, serving as a picker.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/metatile_picker.png" alt="metatile picker">
</div>
</div>
<div class="paragraph">
<p>The right side of the levels tab displays the actual level. To place metatiles, select them from the picker and then use the stamp tool.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/level.png" alt="level">
</div>
</div>
<div class="paragraph">
<p>To edit objects, first select the object layer:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/object_layer.png" alt="object layer">
</div>
</div>
<div class="paragraph">
<p>Objects can then be placed using the stamp tool:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/objects.png" alt="objects">
</div>
</div>
<div class="paragraph">
<p>To edit an object&#8217;s properties, select it, then left click on it.
This dialog will make more sense after reading the <a href="#object_class">Object Classes Tab</a> section.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/object_editor.png" alt="object editor">
</div>
</div>
<div class="paragraph">
<p>The object placed by the stamp tool can be changed by clicking on the "Object Picker" button:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/object_picker.png" alt="object picker">
</div>
</div>
<div class="paragraph">
<p>To add or delete levels sets, use the <a href="#tab_manager">Tab Manager</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="object_class">4.7. Object Classes Tab</h3>
<div class="paragraph">
<p>Each object in MapFab is associated with an object class, which defines its properties.
For example, you may have one object class for enemies, and another for power ups.
The object classes tab lets you define these.</p>
</div>
<div class="paragraph">
<p>To do so, first pick a color for the object class using the "Display Color" picker.
This determines how objects of that class will display in the <a href="#level">Levels Tab</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/object_classes.png" alt="object classes">
</div>
</div>
<div class="paragraph">
<p>Next, fields can be added to the object class.
Each object belonging to the class will have its own defined value for each field.
For example, you might have a field called "hitpoints", which determines how much life each placed enemy starts with.
When using NESFab, the "Type" control control will determine the field&#8217;s type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When using NESFab, it&#8217;s recommended to name fields using <code>snake_case</code>, and avoid using arrays as types.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To add or delete object classes, use the <a href="#tab_manager">Tab Manager</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mapfab_file_format">5. <code>.mapfab</code> File Format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MapFab projects are saved as <code>.mapfab</code> files, which is a binary format.
Data is packed into the file using one of three types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>byte</code>: an 8-bit integer.</p>
</li>
<li>
<p><code>short</code>: a 16-bit little-endian integer.</p>
</li>
<li>
<p><code>string</code>: a null-terminated string.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, the syntax <code>type[N]</code> is used to define a sequence of <code>N</code> values.</p>
</div>
<hr>
<div class="paragraph">
<p>The format is defined as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><code>string</code> Magic Number</strong> - Seven bytes, including the terminator. Must equal the string: <code>MapFab</code>.</p>
</li>
<li>
<p><strong><code>byte</code> Version</strong> - The current <code>.mapfab</code> format version (currently 1).</p>
</li>
<li>
<p><strong><code>string</code> Collision Tileset Path</strong> - The path of the collision tileset, relative to the <code>.mapfab</code> file.</p>
</li>
<li>
<p><strong><code>byte</code> CHR File Count</strong> - The number of the CHR files. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong>For each CHR File Count:</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong><code>string</code> CHR Name</strong> - The name of the CHR file.</p>
</li>
<li>
<p><strong><code>string</code> CHR Tileset Path</strong> - The path of the CHR tileset, relative to the <code>.mapfab</code> file.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong><code>byte</code> Palette Count</strong> - The number of palettes. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong>For each Palette Count:</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong><code>byte[25]</code> Palette</strong> - The palette&#8217;s colors from left to right.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong><code>byte</code> Metatile Set Count</strong> - The number of metatile sets. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong>For each Metatile Set Count:</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong><code>string</code> Metatile Set Name</strong> - The name of the metatile set.</p>
</li>
<li>
<p><strong><code>string</code> Metatile Set CHR</strong> - The name of the metatile set&#8217;s display CHR.</p>
</li>
<li>
<p><strong><code>byte</code> Metatile Set Palette</strong> - The index of the metatile set&#8217;s display palette.</p>
</li>
<li>
<p><strong><code>byte</code> Metatile Set Count</strong> - The number of metatiles in this set. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong><code>byte[1024]</code> Metatile Set Tiles</strong> - The tiles of the metatile set, left-to-right, to-to-bottom.</p>
</li>
<li>
<p><strong><code>byte[256]</code> Metatile Set Attributes</strong> - The attributes of the metatile set, left-to-right, top-to-bottom.</p>
</li>
<li>
<p><strong><code>byte[256]</code> Metatile Set Collisions</strong> - The collisions of the metatile set, left-to-right, top-to-bottom.</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong><code>byte</code> Object Class Count</strong> - The number of object classes. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong>For each Object Class Count:</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong><code>string</code> Object Class Name</strong> - The name of the object class.</p>
</li>
<li>
<p><strong><code>byte[3]</code> Object Class Color</strong> - The RGB components of the object class&#8217;s color.</p>
</li>
<li>
<p><strong><code>byte</code> Object Class Field Count</strong> - The number of fields in the object class.</p>
</li>
<li>
<p><strong>For each Object Class Field Count:</strong></p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong><code>string</code> Field Name</strong> - The name of the field.</p>
</li>
<li>
<p><strong><code>string</code> Field Type</strong> - The type of the field.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p><strong><code>byte</code> Level Count</strong> - The number of object classes. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong>For each Level Count:</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong><code>string</code> Level Name</strong> - The name of the level.</p>
</li>
<li>
<p><strong><code>string</code> Level Macro</strong> - The level&#8217;s macro string.</p>
</li>
<li>
<p><strong><code>string</code> Level CHR Name</strong> - The name of the level&#8217;s CHR data.</p>
</li>
<li>
<p><strong><code>byte</code> Level Palette Index</strong> - The index of the level&#8217;s palette.</p>
</li>
<li>
<p><strong><code>string</code> Level Metatile Set Name</strong> - The name of the level&#8217;s metatile set data.</p>
</li>
<li>
<p><strong><code>byte</code> Level Width</strong> - The width of the level, in metatiles. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong><code>byte</code> Level Height</strong> - The height of the level, in metatiles. A value of 0 should be treated as 256.</p>
</li>
<li>
<p><strong><code>byte[Level Width * Level Height]</code> Level Metatiles</strong> - The metatiles of the level, left-to-right, top-to-bottom.</p>
</li>
<li>
<p><strong><code>short</code> Level Object Count</strong> - The number of objects in the level.</p>
</li>
<li>
<p><strong>For each Level Object Count:</strong></p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong><code>string</code> Object Name</strong> - The name of the object.</p>
</li>
<li>
<p><strong><code>string</code> Object Class Name</strong> - The name of the object&#8217;s object class.</p>
</li>
<li>
<p><strong><code>short</code> Object Class X-Position</strong> - The X-position of the object.</p>
</li>
<li>
<p><strong><code>short</code> Object Class Y-Position</strong> - The Y-position of the object.</p>
</li>
<li>
<p><strong><code>string[Object Class Field Count]</code> Object Fields</strong> - The field values of the object, matching the order of the object class&#8217;s fields.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-07-19 09:01:02 -0500
</div>
</div>
</body>
</html>